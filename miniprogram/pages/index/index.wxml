<view class="container">
  <!-- é¡¶éƒ¨æ ‡é¢˜ -->
  <view class="header">
    <text class="title">ğŸ“… æ´»åŠ¨æ—¥ç¨‹è¡¨</text>
  </view>

  <!-- éå†æœˆä»½ -->
  <block wx:for="{{sortedKeys}}" wx:key="month">
    <view class="month-section">
      <!-- æœˆä»½æ ‡é¢˜ -->
      <view class="month-title">
        <view class="month-icon">â˜…</view>
        <text>{{events[item].year}}å¹´{{events[item].month}}æœˆ</text>
      </view>

      <!-- éå†æ´»åŠ¨ -->
      <block wx:for="{{events[item].items}}" wx:key="index">
        <view class="event-item" bindtap="goToEventsDetail" data-id="{{item._id}}">
          <!-- æ·»åŠ å‹¾é€‰æŒ‰é’® -->
          <view class="check-button {{checkedEvents[item._id] ? 'checked' : ''}}" 
              wx:if="{{item.canSetReminder}}"
              catch:tap="toggleEventCheck" 
              data-id="{{item._id}}"
              data-check-button="true">
            <text class="check-icon">âœ“</text>
          </view>
          <!-- æ´»åŠ¨æ—¶é—´ -->
          <text class="event-time">{{item.date}} {{item.time}}</text>
          <!-- æ´»åŠ¨åç§° -->
          <text class="event-title">{{item.title}}</text>
          <!-- NEW æ ‡ç­¾ -->
          <view class="new-tag" wx:if="{{item.isNew}}">NEW</view>
        </view>
      </block>
    </view>
  </block>
  <!-- åœ¨å®¹å™¨æœ€åº•éƒ¨æ·»åŠ  -->
  <view class="loading-tips" wx:if="{{isLoading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  <view class="loading-tips" wx:if="{{!hasMore && sortedKeys.length > 0}}">
    <text>æ²¡æœ‰æ›´å¤šæ•°æ®äº†</text>
  </view>
</view>

<service-button />